<?xml version="1.0" encoding="UTF-8"?>
<TestScript xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
   <id value="mp9-AdministrationAgreement-serve-3-x-CheckContent-json"/>
   <meta>
      <profile value="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript"/>
   </meta>
   <url value="http://nictiz.nl/fhir/TestScript/mp9-AdministrationAgreement-serve-3-x-CheckContent-json"/>
   <version value="r4-mp9-3.0.0-beta-patchlevel 2025-02"/>
   <name value="Medication Process 9 3.0.0-beta  - AdministrationAgreement - Serve - Scenario 3.x - target CheckContent - JSON Format"/>
   <status value="active"/>
   <publisher value="Nictiz"/>
   <contact>
      <name value="Nictiz"/>
      <telecom>
         <system value="email"/>
         <value value="kwalificatie@nictiz.nl"/>
         <use value="work"/>
      </telecom>
   </contact>
   <description value="Scenario 3.x - TEST Medicatiegegevens TA Scenarioset 3 (Staken Wijzigen)"/>
   <origin>
      <extension url="http://fhir.interoplab.eu/fhir/StructureDefinition/Interoplab-CL-ext-SUT">
         <valueBoolean value="false"/>
      </extension>
      <index value="1"/>
      <profile>
         <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types"/>
         <code value="FHIR-Client"/>
      </profile>
   </origin>
   <destination>
      <extension url="http://fhir.interoplab.eu/fhir/StructureDefinition/Interoplab-CL-ext-SUT">
         <valueBoolean value="true"/>
      </extension>
      <index value="1"/>
      <profile>
         <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types"/>
         <code value="FHIR-Server"/>
      </profile>
   </destination>
   <profile id="Bundle-profile"
            value="http://hl7.org/fhir/StructureDefinition/Bundle"/>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300stoppenTAstart-id"/>
      <description value="Resource.id for MedicationDispense 1"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_start').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_start').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300stoppenTAstaken-id"/>
      <description value="Resource.id for MedicationDispense 2"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_staken').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_staken').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id"/>
      <description value="Resource.id for MedicationDispense 3"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_start').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_start').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id"/>
      <description value="Resource.id for MedicationDispense 4"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_wijzigingmetMVE').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_wijzigingmetMVE').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id"/>
      <description value="Resource.id for MedicationDispense 5"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_techstaken').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_techstaken').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id"/>
      <description value="Resource.id for MedicationDispense 6"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_start').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_start').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id"/>
      <description value="Resource.id for MedicationDispense 7"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_wijzigingzonderMVE').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_wijzigingzonderMVE').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id"/>
      <description value="Resource.id for MedicationDispense 8"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_techstaken').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_techstaken').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id"/>
      <description value="Resource.id for MedicationDispense 9"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_start').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_start').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id"/>
      <description value="Resource.id for MedicationDispense 10"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_onderbreken').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_onderbreken').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id"/>
      <description value="Resource.id for MedicationDispense 11"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_start').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_start').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id"/>
      <description value="Resource.id for MedicationDispense 12"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_techstaken').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_techstaken').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id"/>
      <description value="Resource.id for MedicationDispense 13"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_anderePRK').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_anderePRK').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300annulerenTAstarten-id"/>
      <description value="Resource.id for MedicationDispense 14"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_starten').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_starten').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id"/>
      <description value="Resource.id for MedicationDispense 15"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_geannuleerd').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_geannuleerd').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id"/>
      <description value="Resource.id for MedicationDispense 16"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_GDS').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_GDS').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id"/>
      <description value="Resource.id for MedicationDispense 17"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_zonodig').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_zonodig').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id"/>
      <description value="Resource.id for MedicationDispense 18"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_stop_zonodig').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_stop_zonodig').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id"/>
      <description value="Resource.id for MedicationDispense 19"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start2_zonodig').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start2_zonodig').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300MTDopschortenTA-id"/>
      <description value="Resource.id for MedicationDispense 20"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_MTDopschorten_TA').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_MTDopschorten_TA').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id"/>
      <description value="Resource.id for MedicationDispense 21"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='mbh_300_AfwijkendeToediening_TA').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='mbh_300_AfwijkendeToediening_TA').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id"/>
      <description value="Resource.id for MedicationDispense 22"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id"/>
      <description value="Resource.id for MedicationDispense 23"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_stopTA').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_stopTA').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id"/>
      <description value="Resource.id for MedicationDispense 24"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_correctieTA').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_correctieTA').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id"/>
      <description value="Resource.id for MedicationDispense 25"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_CorrectieToediening_TA').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_CorrectieToediening_TA').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <variable>
      <name value="mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id"/>
      <description value="Resource.id for MedicationDispense 26"/>
      <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_CorrectieOpToediening_TA').id'-->
      <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_CorrectieOpToediening_TA').id"/>
      <sourceId value="fixture-Scenario-3-x"/>
   </variable>
   <test id="Scenario-3-x">
      <name value="Scenario 3.x"/>
      <description value="TEST Medicatiegegevens TA Scenarioset 3 (Staken Wijzigen)"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="MedicationDispense"/>
            <description value="Test server to serve MedicationDispense resource(s) representing MP9 building block AdministrationAgreement"/>
            <accept value="json"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999900493&amp;category=http://snomed.info/sct|422037009&amp;_include=MedicationDispense:medication&amp;_include=MedicationDispense:subject&amp;_include=MedicationDispense:performer&amp;_include:iterate=PractitionerRole:organization&amp;_include:iterate=PractitionerRole:practitioner&amp;_include:iterate=PractitionerRole:location"/>
            <responseId value="fixture-Scenario-3-x"/>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Confirm that the operation was successful"/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the returned resource type is Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the returned Bundle type is searchset."/>
            <direction value="response"/>
            <expression value="Bundle.type"/>
            <operator value="equals"/>
            <stopTestOnFail value="false"/>
            <value value="searchset"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that all returned resources contain an Resource.id except when temporary ids are used in the Bundle. The only time that a resource does not have an id is when it is being submitted to the server using a create operation: https://www.hl7.org/fhir/STU3/resource-definitions.html#Resource.id "/>
            <direction value="response"/>
            <expression value="Bundle.entry.all( $this.fullUrl.matches('^urn:oid:[0-2](\\.(0|[1-9]\\d*))*$') or $this.fullUrl.matches('^urn:uuid:[A-Fa-f\\d]{8}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{12}$') or $this.resource.id.exists())"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that all returned resources except OperationOutcome and Binary contain a meta.profile tag."/>
            <direction value="response"/>
            <expression value="Bundle.entry.resource.where(is(OperationOutcome).not()).where(is(Binary).not()).where(meta.profile.empty()).empty()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the fullUrl does not disagree with the id in the resource, see http://hl7.org/fhir/stu3/bundle-definitions.html#Bundle.entry.fullUrl"/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(fullUrl.exists() and resource.id.exists()).all($this.fullUrl.endsWith($this.resource.id))"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the fullUrl is an absolute URL, an uuid or an oid."/>
            <direction value="response"/>
            <expression value="Bundle.entry.fullUrl.all( startsWith('http://') or startsWith('https://') or matches('^urn:oid:[0-2](\\.(0|[1-9]\\d*))*$') or matches('^urn:uuid:[A-Fa-f\\d]{8}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{12}$') )"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the returned Bundle conforms to the base FHIR specification and the resources to the stated profiles in the meta.profile tag."/>
            <direction value="response"/>
            <stopTestOnFail value="false"/>
            <validateProfileId value="Bundle-profile"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that all Coding elements contain both a .system and a .code."/>
            <direction value="response"/>
            <expression value="Bundle.descendants().where($this.is(Coding)).all(system.exists() and code.exists())"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the OID of the zib valueset is not used for the system of a coding element."/>
            <direction value="response"/>
            <expression value="Bundle.descendants().where($this.is(coding)).where(system.startsWith('urn:oid:2.16.840.1.113883.2.4.3.11.60.40.2')).exists().not()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that all CodeableConcept elements contain either a coding.display or a text value if no Coding exists or has an extension (e.g. a nullFlavor or data-absent-reason extension). For more information see https://informatiestandaarden.nictiz.nl/wiki/FHIR:V1.0_FHIR_IG_STU3Use_of_coded_concepts."/>
            <direction value="response"/>
            <expression value="Bundle.descendants().where($this.is(CodeableConcept)) .all(coding.display.exists() or text.exists() or extension.exists())"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that all References have a display value, see https://informatiestandaarden.nictiz.nl/wiki/FHIR:V1.0_FHIR_IG_STU3#Use_of_the_reference_datatype."/>
            <direction value="response"/>
            <expression value="Bundle.descendants().where($this.is(Reference)).all(display.exists() or extension.where(url = 'http://hl7.org/fhir/StructureDefinition/data-absent-reason').exists() or extension.where(url = 'http://hl7.org/fhir/StructureDefinition/iso21090-nullFlavor').exists())"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that all Identifiers have both a .system and a .value. In rare cases where a general category of identifiers can be used, .type can replace .system. Edge cases for both .system and .type to be unknown are not applicable to Nictiz. For more information, see https://www.hl7.org/fhir/stu3/datatypes.html#Identifier."/>
            <direction value="response"/>
            <expression value="Bundle.descendants().where($this.is(Identifier)).all((system.exists() or type.exists()) and value.exists())"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the returned Bundle total value matches or is less than the number of entries in the Bundle. The included resources should not be counted as entries in the Bundle.total."/>
            <direction value="response"/>
            <expression value="Bundle.total.exists() implies (Bundle.total.toInteger() &lt;= Bundle.entry.where(search.empty() or search.mode = 'match').count())"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the returned Bundle contains a self link."/>
            <direction value="response"/>
            <expression value="Bundle.link.where(relation = 'self' and url.exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that all returned resources except OperationOutcome and Binary contain a meta.profile tag."/>
            <direction value="response"/>
            <expression value="Bundle.entry.resource.where(is(OperationOutcome).not()).where(is(Binary).not()).where(meta.profile.empty()).empty()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that all returned resources contain an Resource.id except when temporary ids are used in the Bundle. The only time that a resource does not have an id is when it is being submitted to the server using a create operation: https://www.hl7.org/fhir/STU3/resource-definitions.html#Resource.id "/>
            <direction value="response"/>
            <expression value="Bundle.entry.all( $this.fullUrl.matches('^urn:oid:[0-2](\\.(0|[1-9]\\d*))*$') or $this.fullUrl.matches('^urn:uuid:[A-Fa-f\\d]{8}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{12}$') or $this.resource.id.exists())"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the fullUrl does not disagree with the id in the resource, see http://hl7.org/fhir/stu3/bundle-definitions.html#Bundle.entry.fullUrl"/>
            <direction value="response"/>
            <expression value="Bundle.entry.all($this.fullUrl.endsWith($this.resource.id) or $this.fullUrl.startsWith('urn:'))"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the fullUrl is an absolute URL, an uuid or an oid."/>
            <direction value="response"/>
            <expression value="Bundle.entry.fullUrl.all( startsWith('http://') or startsWith('https://') or matches('^urn:oid:[0-2](\\.(0|[1-9]\\d*))*$') or matches('^urn:uuid:[A-Fa-f\\d]{8}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{4}-[A-Fa-f\\d]{12}$') )"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that all References have a display value, see https://informatiestandaarden.nictiz.nl/wiki/MedMij:V2020.01/FHIR_IG#Use_of_the_reference_datatype."/>
            <direction value="response"/>
            <expression value="Bundle.descendants().where($this.is(Reference)).all(display.exists())"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that all CodeableConcept elements contain either a coding.display or a text value or has an extension (e.g. a nullFlavor or data-absent-reason extension)."/>
            <direction value="response"/>
            <expression value="Bundle.descendants().where($this.is(CodeableConcept)).all(coding.display.exists() or text.exists() or extension.exists())"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the returned searchset Bundle contains at least 26 MedicationDispense resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(MedicationDispense)).count() &gt;= 26"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the returned searchset Bundle contains at least 38 entries. (Consists of 26 MedicationDispense and 12 Medication resources.)"/>
            <direction value="response"/>
            <expression value="Bundle.entry.count() &gt;= 38"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 1"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300stoppenTAstart)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_stoppen_TA_start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_start').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_start').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_start').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_start').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 1-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 1-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="1-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 1-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstart-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 2"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300stoppenTAstaken)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_stoppen_TA_staken"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_staken').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_staken').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_staken').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_TA_staken').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement' with .valueReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-7"/>
            <description value="Contains .modifierExtension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '410546004' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-8"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-9"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-10"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-11"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-12"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-13"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-14"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-15"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-15-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 2-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-15-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 2-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="2-15-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 2-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenTAstaken-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 3"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_wijzigen_verhoging_TA_start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_start').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_start').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_start').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_start').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).start.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).start.exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 3-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 3-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="3-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 3-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAstart-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 4"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_wijzigen_verhoging_TA_wijzigingmetMVE"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_wijzigingmetMVE').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_wijzigingmetMVE').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_wijzigingmetMVE').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_wijzigingmetMVE').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).start.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).start.exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '2' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '2' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 4-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 4-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="4-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '2' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '2' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 4-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAwijzigingmetMVE-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 5"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_wijzigen_verhoging_TA_techstaken"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_techstaken').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_techstaken').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_techstaken').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verhoging_TA_techstaken').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement' with .valueReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-7"/>
            <description value="Contains .modifierExtension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '410546004' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-8"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-9"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-10"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-11"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-12"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-13"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-14"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-15"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-15-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 5-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-15-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 5-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="5-15-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 5-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverhogingTAtechstaken-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 6"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_wijzigen_verlaging_TA_start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_start').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_start').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_start').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_start').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'wk', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'wk'. This assert checks only one child. Assert 6-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 6-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="6-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 6-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAstart-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 7"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_wijzigen_verlaging_TA_wijzigingzonderMVE"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_wijzigingzonderMVE').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_wijzigingzonderMVE').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_wijzigingzonderMVE').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_wijzigingzonderMVE').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'wk', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'wk'. This assert checks only one child. Assert 7-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 7-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="7-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 7-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAwijzigingzonderMVE-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 8"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_wijzigen_verlaging_TA_techstaken"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_techstaken').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_techstaken').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_techstaken').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_verlaging_TA_techstaken').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement' with .valueReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-7"/>
            <description value="Contains .modifierExtension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '410546004' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-8"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-9"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-10"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-11"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-12"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-13"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-14"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-15"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'wk', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-15-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'wk'. This assert checks only one child. Assert 8-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-15-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 8-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="8-15-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 8-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigenverlagingTAtechstaken-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 9"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300onderbrekenTAstart)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_onderbreken_TA_start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_start').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_start').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_start').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_start').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 9-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 9-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="9-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 9-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAstart-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 10"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_onderbreken_TA_onderbreken"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_onderbreken').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_onderbreken').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_onderbreken').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_onderbreken_TA_onderbreken').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement' with .valueReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-7"/>
            <description value="Contains .modifierExtension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '385655000' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '385655000' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '385655000' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-8"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-9"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-10"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-11"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-12"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-13"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-14"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-15"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-15-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 10-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-15-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 10-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="10-15-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 10-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300onderbrekenTAonderbreken-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 11"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300TAwijzigenTAstart)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_TAwijzigen_TA_start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_start').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_start').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_start').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_start').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration' with .valueDuration with .value '28' and .unit with a value and .system and .code 'd' and .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration').value.ofType(Duration).where(value = 28 and unit.hasValue() and system and code = 'd') and start).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration').value.where($this is Duration).where(value = 28 and unit.hasValue() and system and code = 'd') and start).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 11-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 11-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="11-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 11-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAstart-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 12"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_TAwijzigen_TA_techstaken"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_techstaken').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_techstaken').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_techstaken').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_techstaken').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement' with .valueReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-7"/>
            <description value="Contains .modifierExtension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '410546004' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-8"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-9"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-10"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-11"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-12"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-13"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-14"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-15"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-15-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 12-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-15-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 12-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="12-15-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 12-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAtechstaken-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 13"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_TAwijzigen_TA_anderePRK"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_anderePRK').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_anderePRK').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_anderePRK').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_TAwijzigen_TA_anderePRK').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '182856006' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '182856006' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '182856006' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration' with .valueDuration with .value '18' and .unit with a value and .system and .code 'd' and .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration').value.ofType(Duration).where(value = 18 and unit.hasValue() and system and code = 'd') and start).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration').value.where($this is Duration).where(value = 18 and unit.hasValue() and system and code = 'd') and start).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-7"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement' with .valueReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-8"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-9"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-10"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-11"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-12"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-13"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-14"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-15"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-15-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 13-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-15-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 13-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="13-15-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 13-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300TAwijzigenTAanderePRK-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 14"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300annulerenTAstarten)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_annuleren_TA_starten"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_starten').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_starten').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_starten').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_starten').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'wk', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'wk'. This assert checks only one child. Assert 14-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 14-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="14-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 14-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAstarten-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 15"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_annuleren_TA_geannuleerd"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_geannuleerd').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_geannuleerd').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_geannuleerd').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_annuleren_TA_geannuleerd').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement' with .valueReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-7"/>
            <description value="Contains .modifierExtension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '89925002' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '89925002' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '89925002' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-8"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-9"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-10"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-11"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-12"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-13"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-14"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-15"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'wk', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-15-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'wk'. This assert checks only one child. Assert 15-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'wk').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-15-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 15-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="15-15-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 15-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300annulerenTAgeannuleerd-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 16"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_stoppen_parallele_TA_TA_start_GDS"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_GDS').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_GDS').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_GDS').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_GDS').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration' with .valueDuration with .value '28' and .unit with a value and .system and .code 'd' and .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration').value.ofType(Duration).where(value = 28 and unit.hasValue() and system and code = 'd') and start).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration').value.where($this is Duration).where(value = 28 and unit.hasValue() and system and code = 'd') and start).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-MedicationDispense.DistributionForm' with .valueCodeableConcept with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.3.11.60.20.77.5.3.8' and .code '1' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-MedicationDispense.DistributionForm').value.ofType(CodeableConcept).coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.3.11.60.20.77.5.3.8' and code = '1' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-MedicationDispense.DistributionForm').value.where($this is CodeableConcept).coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.3.11.60.20.77.5.3.8' and code = '1' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-7"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-8"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-9"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-10"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-11"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-12"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-13"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-14"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .when 'MORN', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').dosageInstruction.where(timing.repeat.when.where($this = 'MORN') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').dosageInstruction.where(timing.repeat.when.where($this = 'MORN') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-14-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .when 'MORN'. This assert checks only one child. Assert 16-14 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').dosageInstruction.where(timing.repeat.when.where($this = 'MORN').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').dosageInstruction.where(timing.repeat.when.where($this = 'MORN').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-14-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 16-14 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="16-14-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 16-14 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartGDS-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 17"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_stoppen_parallele_TA_TA_start_zonodig"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_zonodig').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_zonodig').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_zonodig').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start_zonodig').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration' with .valueDuration with .value '28' and .unit with a value and .system and .code 'd' and .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration').value.ofType(Duration).where(value = 28 and unit.hasValue() and system and code = 'd') and start).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration').value.where($this is Duration).where(value = 28 and unit.hasValue() and system and code = 'd') and start).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .when 'EVE', and .asNeededCodeableConcept with .coding with .system 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and .code '1028' and .display, and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE') and asNeeded.ofType(CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display) and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE') and asNeeded.where($this is CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display) and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .when 'EVE'. This assert checks only one child. Assert 17-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-13-2"/>
            <description value="Contains .dosageInstruction.asNeededCodeableConcept with .coding with .system 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and .code '1028' and .display. This assert checks only one child. Assert 17-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').dosageInstruction.where(asNeeded.ofType(CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').dosageInstruction.where(asNeeded.where($this is CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-13-3"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 17-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="17-13-4"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 17-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstartzonodig-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 18"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_stoppen_parallele_TA_TA_stop_zonodig"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_stop_zonodig').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_stop_zonodig').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_stop_zonodig').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_stop_zonodig').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '112751000146109' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '112751000146109' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '112751000146109' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-7"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement' with .valueReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-8"/>
            <description value="Contains .modifierExtension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '410546004' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-9"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-10"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-11"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-12"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-13"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-14"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-15"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-16"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .when 'EVE', and .asNeededCodeableConcept with .coding with .system 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and .code '1028' and .display, and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE') and asNeeded.ofType(CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display) and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE') and asNeeded.where($this is CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display) and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-16-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .when 'EVE'. This assert checks only one child. Assert 18-16 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-16-2"/>
            <description value="Contains .dosageInstruction.asNeededCodeableConcept with .coding with .system 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and .code '1028' and .display. This assert checks only one child. Assert 18-16 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').dosageInstruction.where(asNeeded.ofType(CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').dosageInstruction.where(asNeeded.where($this is CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-16-3"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 18-16 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="18-16-4"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 18-16 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstopzonodig-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 19"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_stoppen_parallele_TA_TA_start2_zonodig"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start2_zonodig').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start2_zonodig').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start2_zonodig').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_stoppen_parallele_TA_TA_start2_zonodig').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '182856006' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '182856006' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '182856006' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration' with .valueDuration with .value '23' and .unit with a value and .system and .code 'd' and .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration').value.ofType(Duration).where(value = 23 and unit.hasValue() and system and code = 'd') and start).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Duration').value.where($this is Duration).where(value = 23 and unit.hasValue() and system and code = 'd') and start).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-7"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement' with .valueReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-8"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-9"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-10"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-11"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-12"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-13"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-14"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-15"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .when 'EVE', and .asNeededCodeableConcept with .coding with .system 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and .code '1028' and .display, and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '2' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '2' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE') and asNeeded.ofType(CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display) and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE') and asNeeded.where($this is CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display) and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-15-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .when 'EVE'. This assert checks only one child. Assert 19-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').dosageInstruction.where(timing.repeat.when.where($this = 'EVE').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-15-2"/>
            <description value="Contains .dosageInstruction.asNeededCodeableConcept with .coding with .system 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and .code '1028' and .display. This assert checks only one child. Assert 19-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').dosageInstruction.where(asNeeded.ofType(CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').dosageInstruction.where(asNeeded.where($this is CodeableConcept).coding.where(system = 'https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek' and code = '1028' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-15-3"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 19-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="19-15-4"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '2' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '2' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 19-15 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300stoppenparalleleTATAstart2zonodig-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 20"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300MTDopschortenTA)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_MTDopschorten_TA"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_MTDopschorten_TA').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_MTDopschorten_TA').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_MTDopschorten_TA').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_MTDopschorten_TA').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).start.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).start.exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .extension with url 'http://hl7.org/fhir/StructureDefinition/timing-exact' with .valueBoolean 'false' and .timeOfDay with ..., and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').dosageInstruction.where(timing.repeat.where(extension('http://hl7.org/fhir/StructureDefinition/timing-exact').value.ofType(boolean) = false and ) and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').dosageInstruction.where(timing.repeat.where(extension('http://hl7.org/fhir/StructureDefinition/timing-exact').value.where($this is boolean) = false and ) and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .extension with url 'http://hl7.org/fhir/StructureDefinition/timing-exact' with .valueBoolean 'false' and .timeOfDay with .... This assert checks only one child. Assert 20-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').dosageInstruction.where(timing.repeat.where(extension('http://hl7.org/fhir/StructureDefinition/timing-exact').value.ofType(boolean) = false and ).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').dosageInstruction.where(timing.repeat.where(extension('http://hl7.org/fhir/StructureDefinition/timing-exact').value.where($this is boolean) = false and ).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 20-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="20-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 20-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300MTDopschortenTA-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 21"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = mbh_300_AfwijkendeToediening_TA"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='mbh_300_AfwijkendeToediening_TA').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='mbh_300_AfwijkendeToediening_TA').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='mbh_300_AfwijkendeToediening_TA').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='mbh_300_AfwijkendeToediening_TA').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).start.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).start.exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .timeOfDay with ..., and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '2' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '2' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').dosageInstruction.where({$_EXPR}).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').dosageInstruction.where({$_EXPR}).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 21-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="21-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '2' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '2' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 21-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-mbh300AfwijkendeToedieningTA-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 22"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300wijzigencorrectieTA)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_wijzigen_correctie_TA"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).start.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).start.exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '11' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '11' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 11 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 11 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 11 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 11 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 22-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 22-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="22-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '11' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '11' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 22-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 11 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 11 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTA-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 11 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 11 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 23"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_wijzigen_correctie_TA_stopTA"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_stopTA').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_stopTA').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_stopTA').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_stopTA').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '159691000146109' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '159691000146109' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-AdministrationAgreement.ReasonModificationOrDiscontinuation').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '159691000146109' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-6"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-7"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement' with .valueReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RelationAdministrationAgreement').value.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-8"/>
            <description value="Contains .modifierExtension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType' with .valueCodeableConcept with .coding with .system 'http://snomed.info/sct' and .code '410546004' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.ofType(CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').modifierExtension.where(url = 'http://nictiz.nl/fhir/StructureDefinition/ext-StopType').value.where($this is CodeableConcept).coding.where(system = 'http://snomed.info/sct' and code = '410546004' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-9"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-10"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-11"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-12"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-13"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-14"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-15"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-16"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '11' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '11' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 11 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 11 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 11 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 11 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-16-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 23-16 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-16-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 23-16 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="23-16-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '11' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '11' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 23-16 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 11 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 11 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAstopTA-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 11 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 11 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 24"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_wijzigen_correctie_TA_correctieTA"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_correctieTA').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_correctieTA').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_correctieTA').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_wijzigen_correctie_TA_correctieTA').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start and .end"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).where(start and end).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).where(start and end).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd', and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd') and route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display) and doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1'))).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-13-1"/>
            <description value="Contains .dosageInstruction.timing with .repeat with .frequency with ... and .period '1' and .periodUnit 'd'. This assert checks only one child. Assert 24-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').dosageInstruction.where(timing.repeat.where( and period = 1 and periodUnit = 'd').exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 24-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="24-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 24-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300wijzigencorrectieTAcorrectieTA-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 25"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300CorrectieToedieningTA)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_CorrectieToediening_TA"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_CorrectieToediening_TA').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_CorrectieToediening_TA').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_CorrectieToediening_TA').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_CorrectieToediening_TA').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).start.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).start.exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .timeOfDay with ..., and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').dosageInstruction.where({$_EXPR}).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').dosageInstruction.where({$_EXPR}).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 25-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="25-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '1' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '1' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 25-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieToedieningTA-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 1 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 1 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test>
      <name value="Scenario 3.x - Check MedicationDispense 26"/>
      <description value="Check if the previous operation results in a FHIR MedicationDispense that contains the values that are expected following Nictiz' materials (fixture .id: mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA)"/>
      <action>
         <assert>
            <description value="Response Bundle contains exactly 1 MedicationDispense with properties: contains a resource with identifier = MBH_300_CorrectieOpToediening_TA"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_CorrectieOpToediening_TA').count() = 1'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_CorrectieOpToediening_TA').count() = 1"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="MedicationDispense resource evaluated in the previous assert contains an .id"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(identifier.value ='MBH_300_CorrectieOpToediening_TA').id.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(identifier.value ='MBH_300_CorrectieOpToediening_TA').id.exists()"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-1"/>
            <description value="Contains .meta with .profile 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').meta.profile.where($this = 'http://nictiz.nl/fhir/StructureDefinition/mp-AdministrationAgreement').exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-2"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime' with .valueDateTime"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.ofType(dateTime).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RegistrationDateTime').value.where($this is dateTime).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-3"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction' with .valueString with a value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.ofType(string).hasValue()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-RenderedDosageInstruction').value.where($this is string).hasValue()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-4"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period' with .valuePeriod with .start"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.ofType(Period).start.exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-TimeInterval.Period').value.where($this is Period).start.exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-5"/>
            <description value="Contains .extension with url 'http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier' with .valueIdentifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.ofType(Identifier).where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').extension('http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier').value.where($this is Identifier).where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-6"/>
            <description value="Contains .identifier with .system and .value"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').identifier.where(system and value).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').identifier.where(system and value).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-7"/>
            <description value="Contains .status 'unknown'"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').status = 'unknown''-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').status = 'unknown'"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-8"/>
            <description value="Contains .category with .coding with .system 'http://snomed.info/sct' and .code '422037009' and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').category.coding.where(system = 'http://snomed.info/sct' and code = '422037009' and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-9"/>
            <description value="Contains .medicationReference with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').medication.ofType(Reference).where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').medication.where($this is Reference).where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-10"/>
            <description value="Contains .subject with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').subject.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').subject.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-11"/>
            <description value="Contains .performer with .actor with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').performer.where(actor.where((reference or identifier) and display)).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-12"/>
            <description value="Contains .authorizingPrescription with either .reference or .identifier and .display"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').authorizingPrescription.where((reference or identifier) and display).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-13"/>
            <description value="Contains .dosageInstruction with .timing with .repeat with .timeOfDay with ..., and .route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display, and .doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '2' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '2' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks if all children exist (if applicable with their specific values) and if they are present within one element. Following asserts check if individual children exist to help you debug if this assert fails"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').dosageInstruction.where({$_EXPR}).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').dosageInstruction.where({$_EXPR}).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-13-2"/>
            <description value="Contains .dosageInstruction.route with .coding with .system 'urn:oid:2.16.840.1.113883.2.4.4.9' and .code '9' and .display. This assert checks only one child. Assert 26-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').dosageInstruction.where(route.coding.where(system = 'urn:oid:2.16.840.1.113883.2.4.4.9' and code = '9' and display).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <label value="26-13-3"/>
            <description value="Contains .dosageInstruction.doseAndRate with .doseQuantity with .extension with url 'http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation' with .valueQuantity with .value '2' and .unit and .system 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and .code '245' and .value '2' and .unit and .system 'http://unitsofmeasure.org' and .code '1'. This assert checks only one child. Assert 26-13 checks if all children are present in the same parent"/>
            <direction value="response"/>
            <!--FHIRPath expressions with .ofType(...) are poorly supported at the moment, so it was rewritten. Original expression: 'Bundle.entry.resource.ofType(MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').dosageInstruction.where(doseAndRate.where(dose.ofType(Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.ofType(Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()'-->
            <expression value="Bundle.entry.resource.where($this is MedicationDispense).where(id = '${mp-AdmAgr-mp9-MBH300CorrectieOpToedieningTA-id}').dosageInstruction.where(doseAndRate.where(dose.where($this is Quantity).where(extension('http://hl7.org/fhir/StructureDefinition/iso21090-PQ-translation').value.where($this is Quantity).where(value = 2 and unit and system = 'urn:oid:2.16.840.1.113883.2.4.4.1.900.2' and code = '245') and value = 2 and unit and system = 'http://unitsofmeasure.org' and code = '1')).exists()).exists()"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
</TestScript>
