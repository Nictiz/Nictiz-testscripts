<?xml version="1.0" encoding="UTF-8"?>
<TestScript xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
   <id value="bgz-msz-xis-1-1-retrieve-bgz"/>
   <meta>
      <profile value="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript"/>
   </meta>
   <url value="http://nictiz.nl/fhir/TestScript/bgz-msz-xis-1-1-retrieve-bgz"/>
   <version value="stu3-3.0-patchlevel 2025-02"/>
   <name value="BgZ MSZ - Retrieving XIS - Scenario 1.1 - Retrieve BgZ resources of de Boer"/>
   <status value="active"/>
   <publisher value="Nictiz"/>
   <contact>
      <name value="Nictiz"/>
      <telecom>
         <system value="email"/>
         <value value="kwalificatie@nictiz.nl"/>
         <use value="work"/>
      </telecom>
   </contact>
   <description value="Scenario 1.1 - Retrieve BgZ resources of de Boer"/>
   <origin>
      <extension url="http://fhir.interoplab.eu/fhir/StructureDefinition/Interoplab-CL-ext-SUT">
         <valueBoolean value="true"/>
      </extension>
      <index value="1"/>
      <profile>
         <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types"/>
         <code value="FHIR-Client"/>
      </profile>
   </origin>
   <destination>
      <extension url="http://fhir.interoplab.eu/fhir/StructureDefinition/Interoplab-CL-ext-SUT">
         <valueBoolean value="false"/>
      </extension>
      <index value="1"/>
      <profile>
         <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types"/>
         <code value="FHIR-Server"/>
      </profile>
   </destination>
   <test id="01-retrieve-Patient">
      <name value="Scenario 1.1 - Patient"/>
      <description value="Query Patient resource including the patient's general practitioner for HCIM Patient"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Patient"/>
            <description value="Test Client to retrieve Patient resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;_include=Patient:general-practitioner"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Patient resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Patient)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Practitioner resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Practitioner)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="02-retrieve-Payer">
      <name value="Scenario 1.1 - Payer"/>
      <description value="Query Coverage resource(s) including the insurer for HCIM Payer"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Coverage"/>
            <description value="Test Client to retrieve Coverage resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?beneficiary.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;_include=Coverage:payor"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Coverage resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Coverage)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Organization resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Organization)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="03-retrieve-TreatmentDirective">
      <name value="Scenario 1.1 - TreatmentDirective"/>
      <description value="Query Consent resource(s) for HCIM TreatmentDirective"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Consent"/>
            <description value="Test Client to retrieve Consent resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;category=http://snomed.info/sct|11291000146105"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Consent resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Consent)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="04-retrieve-AdvanceDirective">
      <name value="Scenario 1.1 - AdvanceDirective"/>
      <description value="Query Consent resource(s) for HCIM AdvanceDirective"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Consent"/>
            <description value="Test Client to retrieve Consent resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;category=http://snomed.info/sct|11341000146107"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Consent resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Consent)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="05-retrieve-FunctionalOrMentalStatus">
      <name value="Scenario 1.1 - FunctionalOrMentalStatus"/>
      <description value="Query Observation resource(s) for HCIM FunctionalOrMentalStatus"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test Client to retrieve Observation resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;category=http://snomed.info/sct|118228005,http://snomed.info/sct|384821006"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 0 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 0"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="06-retrieve-Problem">
      <name value="Scenario 1.1 - Problem"/>
      <description value="Query Condition resource(s) for HCIM Problem"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Condition"/>
            <description value="Test Client to retrieve Condition resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 2 Condition resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Condition)).count() = 2"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="07-retrieve-LivingSituation">
      <name value="Scenario 1.1 - LivingSituation"/>
      <description value="Query Observation resource(s) for last known HCIM LivingSituation"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test Client to retrieve Observation resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;code=http://snomed.info/sct|365508006"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="08-retrieve-DrugUse">
      <name value="Scenario 1.1 - DrugUse"/>
      <description value="Query Observation resource(s) for HCIM DrugUse"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test Client to retrieve Observation resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;code=http://snomed.info/sct|228366006"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="09-retrieve-AlcoholUse">
      <name value="Scenario 1.1 - AlcoholUse"/>
      <description value="Query Observation resource(s) for HCIM AlcoholUse"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test Client to retrieve Observation resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;code=http://snomed.info/sct|228273003"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="10-retrieve-TobaccoUse">
      <name value="Scenario 1.1 - TobaccoUse"/>
      <description value="Query Observation resource(s) for HCIM TobaccoUse"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test Client to retrieve Observation resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;code=http://snomed.info/sct|365980008"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="11-retrieve-NutritionAdvice">
      <name value="Scenario 1.1 - NutritionAdvice"/>
      <description value="Query NutritionOrder resource(s) for HCIM NutritionAdvice"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="NutritionOrder"/>
            <description value="Test Client to retrieve NutritionOrder resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 NutritionOrder resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(NutritionOrder)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="12-retrieve-Alert">
      <name value="Scenario 1.1 - Alert"/>
      <description value="Query Flag resource(s) for HCIM Alert"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Flag"/>
            <description value="Test Client to retrieve Flag resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Flag resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Flag)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="13-retrieve-AllergyIntolerance">
      <name value="Scenario 1.1 - AllergyIntolerance"/>
      <description value="Query AllergyIntolerance resource(s) for HCIM AllergyIntolerance"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="AllergyIntolerance"/>
            <description value="Test Client to retrieve AllergyIntolerance resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 AllergyIntolerance resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(AllergyIntolerance)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="14-retrieve-MedicationUse">
      <name value="Scenario 1.1 - MedicationUse"/>
      <description value="Query MedicationStatement resource(s) including the medication for HCIM MedicationUse"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="MedicationStatement"/>
            <description value="Test Client to retrieve MedicationStatement resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;category=urn:oid:2.16.840.1.113883.2.4.3.11.60.20.77.5.3|6&amp;_include=MedicationStatement:medication"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 MedicationStatement resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(MedicationStatement)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="15-retrieve-MedicationAgreement">
      <name value="Scenario 1.1 - MedicationAgreement"/>
      <description value="Query MedicationRequest resource(s) including the medication for HCIM MedicationAgreement"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="MedicationRequest"/>
            <description value="Test Client to retrieve MedicationRequest resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;category=http://snomed.info/sct|16076005&amp;_include=MedicationRequest:medication"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 MedicationRequest resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(MedicationRequest)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="16-retrieve-AdministrationAgreement">
      <name value="Scenario 1.1 - AdministrationAgreement"/>
      <description value="Query MedicationDispense resource(s) including the medication for HCIM AdministrationAgreement"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="MedicationDispense"/>
            <description value="Test Client to retrieve MedicationDispense resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;category=http://snomed.info/sct|422037009&amp;_include=MedicationDispense:medication"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 MedicationDispense resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(MedicationDispense)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="17-retrieve-MedicalDevice">
      <name value="Scenario 1.1 - MedicalDevice"/>
      <description value="Query DeviceUseStatement resource(s) including the device for HCIM MedicalDevice"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="DeviceUseStatement"/>
            <description value="Test Client to retrieve DeviceUseStatement resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;_include=DeviceUseStatement:device"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 DeviceUseStatement resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(DeviceUseStatement)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Device resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Device)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="18-retrieve-Vaccination">
      <name value="Scenario 1.1 - Vaccination"/>
      <description value="Query Immunization resource(s) for HCIM Vaccination"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Immunization"/>
            <description value="Test Client to retrieve Immunization resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;status=completed"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Immunization resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Immunization)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="19-retrieve-BloodPressure">
      <name value="Scenario 1.1 - BloodPressure (all)"/>
      <description value="Query Observation resource(s) for HCIM BloodPressure"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test Client to retrieve Observation resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="/$lastn?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;code=http://loinc.org|85354-9"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="20-retrieve-BodyWeight">
      <name value="Scenario 1.1 - BodyWeight"/>
      <description value="Query Observation resource(s) for last known HCIM BodyWeight"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test Client to retrieve Observation resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="/$lastn?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;code=http://loinc.org|29463-7"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="21-retrieve-BodyHeight">
      <name value="Scenario 1.1 - BodyHeight"/>
      <description value="Query Observation resource(s) for last known HCIM BodyHeight"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test Client to retrieve Observation resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="/$lastn?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;code=http://loinc.org|8302-2,http://loinc.org|8306-3,http://loinc.org|8308-9"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="22-retrieve-LaboratoryTestResult">
      <name value="Scenario 1.1 - LaboratoryTestResult"/>
      <description value="Query Observation resource(s) for HCIM LaboratoryTestResult"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test Client to retrieve Observation resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="/$lastn?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;category=http://snomed.info/sct|49581000146104&amp;include=Observation:related-target"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 2 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 2"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <!--<nts:include value="assert.response.numResources" scope="common"
            resource="Specimen" count="2"/>-->
   </test>
   <test id="23-retrieve-Procedure">
      <name value="Scenario 1.1 - Procedure"/>
      <description value="Query Procedure resource(s) for HCIM Procedure"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Procedure"/>
            <description value="Test Client to retrieve Procedure resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;category=http://snomed.info/sct|387713003,http://snomed.info/sct|258174001"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Procedure resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Procedure)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="24-retrieve-Contact">
      <name value="Scenario 1.1 - Contact (all)"/>
      <description value="Query Encounter resource(s) for HCIM Contact"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Encounter"/>
            <description value="Test Client to retrieve Encounter resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Encounter resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Encounter)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="25-retrieve-ProcedureRequest">
      <name value="Scenario 1.1 - PlannedCareActivity-ProcedureRequest"/>
      <description value="Query ProcedureRequest resource(s) for active HCIM PlannedCareActivity-ProcedureRequest"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="ProcedureRequest"/>
            <description value="Test Client to retrieve ProcedureRequest resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;status=active"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 0 ProcedureRequest resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(ProcedureRequest)).count() = 0"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="26-retrieve-Careteam">
      <name value="Scenario 1.1 - Careteam"/>
      <description value="Query Careteam resource(s)"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Careteam"/>
            <description value="Test Client to retrieve Careteam resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538&amp;status=active&amp;_include=Careteam:participant"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 0 Careteam resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Careteam)).count() = 0"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="27-retrieve-Provenance">
      <name value="Scenario 1.1 - Provenance"/>
      <description value="Query Provenance resource(s)"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/restful-interaction"/>
               <code value="search"/>
            </type>
            <resource value="Provenance"/>
            <description value="Test Client to retrieve Provenance resources."/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?patient.identifier=http://fhir.nl/fhir/NamingSystem/bsn|999996538"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="Bearer 7e358341-05a0-4df3-8429-3f655317d477"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Make sure that the server of the test simulator gives a success response."/>
            <operator value="in"/>
            <responseCode value="200,201"/>
            <stopTestOnFail value="true"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the server of the test simulator returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <description value="Confirm that the response Bundle contains 1 Provenance resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Provenance)).count() = 1"/>
            <stopTestOnFail value="false"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
</TestScript>
