<?xml version="1.0" encoding="UTF-8"?>
<nts:component xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
    <nts:parameter name="warningOnly" value="false"/>
        
    <action>
        <assert>
            <description
                value="Confirm that Bundle contains the right name for the {$resource}"/>
            <direction value="{$direction}"/>
            <expression value="Bundle.entry.resource.as({$resource}).name.where(use='{$use}' and text='{$text}' and family='{$family}' and given='{$given}')"/>
            <warningOnly value="{$warningOnly}"/>
        </assert>
    </action>

    <action>
        <assert>
            <description
                value="Confirm that Bundle contains the right family display name for the {$resource}"/>
            <direction value="{$direction}"/>
            <expression value="Bundle.entry.resource.as({$resource}).name.family.extension.where(url='{$urlfamily}' and value='{$familydisplay}').exists()"/>
            <warningOnly value="{$warningOnly}"/>
        </assert>
    </action>

    <action>
        <assert>
            <description
                value="Confirm that Bundle contains the right family url and code for the {$resource}"/>
            <direction value="{$direction}"/>
            <expression value="Bundle.entry.resource.as({$resource}).name.given.extension.where(url='{$urlgiven}' and value='{$givencode}').exists()"/>
            <warningOnly value="{$warningOnly}"/>
        </assert>
    </action>

</nts:component>