<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://hl7.org/fhir/STU3/testscript.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TestScript xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript" nts:scenario="client">
   <id value="gbz-fhir3-0-2-ikz-phr-1-1"/>
   <version value="stu3-3.0"/>
   <name value="Nictiz Geboortezorg - Client - Scenario 1.1 - Retrieve Integrale Zwangerschapskaart resources of current pregnancy of Hanna Kooij"/>
   <description value="Scenario 1.1: Retrieve Integrale Zwangerschapskaart resources of current pregnancy of Hanna Kooij"/>
   <nts:patientTokenFixture href="gebz-nl-core-patient-XXX-Kooij-token.xml" />
   <nts:fixture id="patient-fixture" href="Vrouw1-Kaart1/Gebz-med_mij_01_beschikbaarstellen_integrale_zwangerschapskaart-nl-core-patient-HANNAHXXX-KOOIJ.xml"/>
   <nts:fixture id="episodeofcare-fixture" href="Vrouw1-Kaart1/Gebz-med_mij_01_beschikbaarstellen_integrale_zwangerschapskaart-bc-MaternalRecord-0d479b8b-2063-11ec-1751-020000000000.xml"/>
   <nts:variable name="patient-id" expression="Patient.id" sourceId="patient-fixture"/>
   <nts:variable name="dossier-id" expression="EpisodeOfCare.id" sourceId="episodeofcare-fixture"/>
   <nts:variable name="T" defaultValue="${CURRENTDATE}"/>
   
   <!-- Zwangere vrouw -->
   <test id="01-RetrieveWoman">
      <name value="01-RetrieveWoman"/>
      <description value="Query Patient resource for HCIM Patient"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Patient"/>
         <nts:with-parameter name="params" value="?_id=${patient-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Patient"/>
         <nts:with-parameter name="count" value="1"/>
      </nts:include>
   </test>
     
   <!-- Actieve zwangerschap (dossier) -->
   <test id="02-RetrieveMaternalRecord">
      <name value="02-RetrieveMaternalRecord"/>
      <description value="Test Client query operation for MaternalRecord (EpisodeOfCare) including managing organization (Organization) and care manager (Practitioner)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="EpisodeOfCare"/>
         <nts:with-parameter name="params" value="?patient=${patient-id}&amp;type=http://snomed.info/sct|364320009&amp;status=active&amp;_include=EpisodeOfCare:organization&amp;_include=EpisodeOfCare:care-manager"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="EpisodeOfCare"/>
         <nts:with-parameter name="count" value="1"/>
      </nts:include>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Organization"/>
         <nts:with-parameter name="count" value="1"/>
      </nts:include>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Practitioner"/>
         <nts:with-parameter name="count" value="1"/>
      </nts:include>
   </test>
  
   <!-- Actieve zwangerschap (zwangerschap) -->
   <test id="03-RetrievePregnancy">
      <name value="03-RetrievePregnancy"/>
      <description value="Test Client query operation for Pregnancy (Condition)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Condition"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|364320009&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Condition"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
   
   <!-- Observaties bij de zwangerschap -->
   <test id="04-RetrieveParity">
      <name value="04-RetrieveParity"/>
      <description value="Test Client query operation for Parity (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|364325004&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="05-RetrieveGravidity">
      <name value="05-RetrieveGravidity"/>
      <description value="Test Client query operation for Gravidity (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|161732006&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
    
   <test id="06-RetrieveEstTermDate">
      <name value="06-RetrieveEstTermDate"/>
      <description value="Test Client query operation for Estimated TermDate (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|161714006&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="07-RetrieveDefTermDate">
      <name value="07-RetrieveDefTermDate"/>
      <description value="Test Client query operation for Definitive TermDate (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|147781000146105&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="08-RetrieveMultiplePregnancy">
      <name value="08-RetrieveMultiplePregnancy"/>
      <description value="Test Client query operation for MultiplePregnancy (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|65147003&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="09-RetrieveNumberOfFetus">
      <name value="09-RetrieveNumberOfFetus"/>
      <description value="Test Client query operation for Definitive NumberOfFetus (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|246435002&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>   
     
   <test id="10-RetrieveNumberOfLivingOffSpring">
      <name value="10-RetrieveNumberOfLivingOffSpring"/>
      <description value="Test Client query operation for NumberOfLivingOffSpring (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|143881000146107&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="11-RetrieveFetalLoss">
      <name value="11-RetrieveFetalLoss"/>
      <description value="Test Client query operation for FetalLoss (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|713651007&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>

   <test id="12-RetrieveFoliumAccidIntake">
      <name value="12-RetrieveFoliumAccidIntake"/>
      <description value="Test Client query operation for FoliumAccidIntake (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|792807003&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
   
   <!-- Prenatale controles -->
   <test id="13-RetrievePrenatalVisits">
      <name value="13-RetrievePrenatalVisits"/>
      <description value="Test Client query operation for PrenatalVisits (Encounter)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Encounter"/>
         <nts:with-parameter name="params" value="?type=http://snomed.info/sct|18114009&amp;episodeofcare=${dossier-id}&amp;_include=Encounter:participant:Practitioner"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Encounter"></nts:with-parameter>
         <nts:with-parameter name="count" value="2"></nts:with-parameter>
      </nts:include>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Practitioner"/>
         <nts:with-parameter name="count" value="1"/>
      </nts:include>
   </test>  
      
   <!-- Observaties bij de vrouw / prenatale controles -->  
   <test id="14-RetrieveFetalMovement">
      <name value="14-RetrieveFetalMovement"/>
      <description value="Test Client query operation for FetalMovement (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|364618000&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|364618000&amp;context:Encounter.episodeofcare=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
     
   <test id="15-RetrieveBodyWeight">
      <name value="15-RetrieveBodyWeight"/>
      <description value="Test Client query operation for BodyWeight (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://loinc.org|29463-7&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://loinc.org|29463-7&amp;context:Encounter.episodeofcare=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="2"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="16-RetrieveBloodPressure">
      <name value="16-RetrieveBloodPressure"/>
      <description value="Test Client query operation for BloodPressure (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://loinc.org|85354-9&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://loinc.org|85354-9&amp;context:Encounter.episodeofcare=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="2"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="17-RetrieveAlcoholUse">
      <name value="17-RetrieveAlcoholUse"/>
      <description value="Test Client query operation for AlcoholUse (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|228273003&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|228273003&amp;context:Encounter.episodeofcare=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="18-RetrieveDrugUse">
      <name value="18-RetrieveDrugUse"/>
      <description value="Test Client query operation for DrugUse (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|228366006&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|228366006&amp;context:Encounter.episodeofcare=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>

   <test id="19-RetrieveTobaccoUse">
      <name value="19-RetrieveTobaccoUse"/>
      <description value="Test Client query operation for TobaccoUse (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|365980008&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|365980008&amp;context:Encounter.episodeofcare=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="20-RetrieveFetalHeartRate">
      <name value="20-RetrieveFetalHeartRate"/>
      <description value="Test Client query operation for FetalHeartRate (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|249043002&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|249043002&amp;context:Encounter.episodeofcare=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
   </test>
   
   <!-- Zwangerschapsproblemen -->
   <test id="21-RetrievePregnancyConditions">
      <name value="21-RetrievePregnancyConditions"/>
      <description value="Test Client query operation for Conditions related to pregnancy"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Condition"/>
         <nts:with-parameter name="params" value="?category=http://snomed.info/sct|173300003&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Condition"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
      </nts:include>
      <!-- Zwakke foetale beweging -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="(Zwakke foetale beweging)"></nts:with-parameter>
         <nts:with-parameter name="resource" value="Condition"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
         <nts:with-parameter name="code" value="276372004"></nts:with-parameter>
         <nts:with-parameter name="system" value="http://snomed.info/sct"></nts:with-parameter>
      </nts:include>
   </test>
        
   <!-- Alle verrichtingen -->
   <test id="22-RetrieveObstetricProcedures">
      <name value="22-RetrieveObstetricProcedures"/>
      <description value="Test Client query operation for (Obstetric) Procedures"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Procedure"/>
         <nts:with-parameter name="params" value="?category=http://snomed.info/sct|386637004&amp;context=EpisodeOfCare/${dossier-id}&amp;_include=Procedure:subject&amp;_include=Procedure:performer:Organization"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Procedure"></nts:with-parameter>
         <nts:with-parameter name="count" value="3"></nts:with-parameter>
      </nts:include>
      <!-- Verrichting (Zwangerschap) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="(Foetale hartslag monitoring)"></nts:with-parameter>
         <nts:with-parameter name="resource" value="Procedure"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
         <nts:with-parameter name="code" value="281568006"></nts:with-parameter>
         <nts:with-parameter name="system" value="http://snomed.info/sct"></nts:with-parameter>
      </nts:include>
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="(Echo)"></nts:with-parameter>
         <nts:with-parameter name="resource" value="Procedure"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
         <nts:with-parameter name="code" value="241491007"></nts:with-parameter>
         <nts:with-parameter name="system" value="http://snomed.info/sct"></nts:with-parameter>
      </nts:include>
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="(Educatiemateriaal)"></nts:with-parameter>
         <nts:with-parameter name="resource" value="Procedure"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
         <nts:with-parameter name="code" value="445283009"></nts:with-parameter>
         <nts:with-parameter name="system" value="http://snomed.info/sct"></nts:with-parameter>
      </nts:include>
   </test>
       
   <test id="23-RetrieveOnsetFirstStageOfLabor">
      <name value="23-RetrieveOnsetFirstStageOfLabor"/>
      <description value="Test Client query operation for OnsetFirstStageOfLabor (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|439771001&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="24-RetrieveTypeFirstStageOfLabor">
      <name value="24-RetrieveTypeFirstStageOfLabor"/>
      <description value="Test Client query operation for TypeFirstStageOfLabor (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|249120008&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>

   <!-- Observaties bij de geboorte (kindspecifiek) -->
   <test id="25-RetrieveParturitionType">
      <name value="25-RetrieveParturitionType"/>
      <description value="Test Client query operation for ParturitionType (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|364336006&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="26-RetrieveNumberOfOffspring">
      <name value="26-RetrieveNumberOfOffspring"/>
      <description value="Test Client query operation for NumberOfOffspring (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|118861000146102&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>
   
   <test id="27-RetrievePlaceOfBirth">
      <name value="27-RetrievePlaceOfBirth"/>
      <description value="Test Client query operation for PlaceOfBirth (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|169812000&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>      
   
   <!-- Problemen bij de bevalling/geboorte -->
   <test id="28-RetrieveLaborAndDeliveryConditions">
      <name value="28-RetrieveLaborAndDeliveryConditions"/>
      <description value="Test Client query operation for Conditions related to labor and delivery"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Condition"/>
         <nts:with-parameter name="params" value="?category=http://snomed.info/sct|362972006&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Condition"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>
   
   <!-- kind: patient, geboortegewicht, lengte, schedelomvang, apgar 1,5,1 -->
   <!--   todo: voor nu nemen we gegevens kind niet mee -->
   <!--   <test id="29-RetrieveChild">
      <name value="29-RetrieveChild"/>
      <description value="Test Client query operation for Child (Patient)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Patient"/>
         <nts:with-parameter name="params" value="?_id=${child-id}"/> <!-\- ?_has:Procedure:patient:code=http://snomed.info/sct|3950001 -\->
         <!-\- context.condition = pregnancyId -\->
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Patient"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>-->
   
   <!--   todo: voor nu nemen we gegevens kind niet mee -->
   <!--   <test id="30-RetrieveChildObservations">
      <name value="30-RetrieveChildObservations"/>
      <description value="Test Client query operation for Child Observations"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?code=http://loinc.org|89269-5&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>  --> 
    
   <!-- Maternale onderzoeksgegevens -->
   <test id="31-RetrieveLabObservations">
      <name value="31-RetrieveLabObservations"/>
      <description value="Test Client query operation for Lab Observations (Observation)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?category=http://snomed.info/sct|49581000146104&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="3"></nts:with-parameter>
      </nts:include>
      <!-- Lab rhesus D -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="(Rhesus D)"></nts:with-parameter>
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
         <nts:with-parameter name="code" value="1305-2"></nts:with-parameter>
         <nts:with-parameter name="system" value="http://loinc.org"></nts:with-parameter>
      </nts:include>
      <!-- Lab rhesus C -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="(Rhesus C)"></nts:with-parameter>
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
         <nts:with-parameter name="code" value="1159-3"></nts:with-parameter>
         <nts:with-parameter name="system" value="http://loinc.org"></nts:with-parameter>
      </nts:include>
      <!-- Bloedgroep -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="(Bloedgroep)"></nts:with-parameter>
         <nts:with-parameter name="resource" value="Observation"></nts:with-parameter>
         <nts:with-parameter name="count" value="1"></nts:with-parameter>
         <nts:with-parameter name="code" value="883-9"></nts:with-parameter>
         <nts:with-parameter name="system" value="http://loinc.org"></nts:with-parameter>
      </nts:include>
   </test>
   
   <!-- Lab hb-pathie -->
   <test id="32-RetrieveLabHbPathy">
      <name value="32-RetrieveLabHbPathy"/>
      <description value="Test Client query operation for Lab Haemoglobinpathy (Condition)"/>
      <nts:include value="gbz-operation-search-phr">
         <nts:with-parameter name="resource" value="Condition"/>
         <nts:with-parameter name="params" value="?code=http://snomed.info/sct|36472007&amp;context=EpisodeOfCare/${dossier-id}"/>
      </nts:include>
      <nts:include value="assert-authorizationHeader" scope="common"/>
      <nts:include value="assert-responseSearchBundleSuccess" scope="common"/>
      <nts:include value="assert-returnCount" scope="common">
         <nts:with-parameter name="resource" value="Condition"></nts:with-parameter>
         <nts:with-parameter name="count" value="0"></nts:with-parameter>
      </nts:include>
   </test>
    
</TestScript>
