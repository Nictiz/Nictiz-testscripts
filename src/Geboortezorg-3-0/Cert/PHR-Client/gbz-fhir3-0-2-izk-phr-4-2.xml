<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://hl7.org/fhir/STU3/testscript.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TestScript xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript" nts:scenario="client">
   <id value="gbz-fhir3-0-2-ikz-phr-4-2"/>
   <version value="stu3-3.0"/>
   <name value="Nictiz Geboortezorg - Client - Scenario 4.2 - Retrieve Integrale Zwangerschapskaart resources of twin pregnancy of Fiona Swart"/>
   <description value="Scenario 4.2: Retrieve Integrale Zwangerschapskaart resources of twin pregnancy of Fiona Swart"/>
   <nts:authToken patientResourceId="FIONAXXX-Swart"/>
   <nts:fixture id="episodeofcare-fixture" href="Verloskunde-Casus2/mm-gbz-bc-MaternalRecord-8b4a1a6f-6b0c-11ec-0000-020000000000.xml"/>
   <variable><name value="episode-id"/><expression value="EpisodeOfCare.id"/><sourceId value="episodeofcare-fixture"/></variable>
   <variable><name value="T"/><defaultValue value="${CURRENTDATE}"/></variable>
   <!-- Patient - Zwangere vrouw -->
   <test id="1-RetrieveWoman">
      <name value="1-RetrieveWoman"/>
      <description value="Query Patient resource for HCIM Patient"/>
      <nts:include value="medmij/test.phr.successfulsearch" scope="common">
         <nts:with-parameter name="resource" value="Patient"/>
      </nts:include>
      <nts:include value="assert.response.numResources" scope="common">
         <nts:with-parameter name="resource" value="Patient"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="atLeast"/>
      </nts:include>
   </test>

   <!-- EpisodeOfCare - zorgepisode zwangerschap -->
   <test id="2-RetrieveMaternalRecord">
      <name value="2-RetrieveMaternalRecord"/>
      <description value="Test Client query operation for MaternalRecord (EpisodeOfCare) including managing organization (Organization) and care manager (Practitioner)"/>
      <nts:include value="medmij/test.phr.successfulsearch" scope="common">
         <nts:with-parameter name="resource" value="EpisodeOfCare"/>
         <nts:with-parameter name="params" value="?type=http://snomed.info/sct|364320009&amp;_include=EpisodeOfCare:organization&amp;_include=EpisodeOfCare:care-manager"/>
      </nts:include>
      <nts:include value="assert.response.numResources" scope="common" resource="EpisodeOfCare" count="1"/>
      <nts:include value="assert.response.numResources" scope="common" resource="Organization" count="1"/>
      <nts:include value="assert.response.numResources" scope="common" resource="Practitioner" count="1"/>
   </test>

   <!-- Conditions - Problemen gerelateerd aan zorgepisode -->
   <test id="3-RetrieveConditions">
      <name value="3-RetrieveConditions"/>
      <description value="Test Client query operation for Conditions (including Pregnancy)"/>
      <nts:include value="medmij/test.phr.successfulsearch" scope="common">
         <nts:with-parameter name="resource" value="Condition"/>
         <nts:with-parameter name="params" value="?context=EpisodeOfCare/${episode-id}"/>
      </nts:include>
      <nts:include value="assert.response.numResources" scope="common" resource="Condition" count="3"/>
      <!-- bevinding betreffende zwangerschap (bevinding) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="bevinding betreffende zwangerschap (bevinding)"/>
         <nts:with-parameter name="resource" value="Condition"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="118185001"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- meerlingzwangerschap (bevinding) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="meerlingzwangerschap (bevinding)"/>
         <nts:with-parameter name="resource" value="Condition"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="16356006"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- intra-uteriene groeiretardatie (aandoening) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="intra-uteriene groeiretardatie (aandoening)"/>
         <nts:with-parameter name="resource" value="Condition"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="22033007"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
   </test>

   <!-- Encounters -->
   <test id="4-RetrieveEncounters">
      <name value="4-RetrieveEncounters"/>
      <description value="Test Client query operation for Encounters"/>
      <nts:include value="medmij/test.phr.successfulsearch" scope="common">
         <nts:with-parameter name="resource" value="Encounter"/>
         <nts:with-parameter name="params" value="?episodeofcare=EpisodeOfCare/${episode-id}&amp;_include=Encounter:practitioner"/>
      </nts:include>
      <nts:include value="assert.response.numResources" scope="common" resource="Encounter" count="3"/>
      <nts:include value="assert.response.numResources" scope="common" resource="Practitioner" count="1"/>
      <!-- consult (verrichting) -->
      <nts:include value="assert.response.numResourcesWithCode" scope="common">
         <nts:with-parameter name="additionalDescription" value="(ContactSoort)"/>
         <nts:with-parameter name="codedElement" value="type"/>
         <nts:with-parameter name="resource" value="Encounter"/>
         <nts:with-parameter name="count" value="3"/>
         <nts:with-parameter name="code" value="11429006"/>
      </nts:include>
   </test>

   <!-- Observations - Observaties gekoppeld aan episode -->
   <test id="5a-RetrieveObservations">
      <name value="5a-RetrieveObservations"/>
      <description value="Test Client query operation for Observations"/>
      <nts:include value="medmij/test.phr.successfulsearch" scope="common">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?context=EpisodeOfCare/${episode-id}"/>
      </nts:include>
      <!-- Parity -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="Parity"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="11977-6"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- Gravidity -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="Gravidity"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="11996-6"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- Lichaamsgewicht^bij geboorte [massa] d.m.v. meting -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="Lichaamsgewicht^bij geboorte [massa] d.m.v. meting"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="8339-4"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- Datum van laatste menstruatie [datum] -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="Datum van laatste menstruatie [datum]"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="8665-2"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- Lichaamslengte^bij geboorte [afmeting] d.m.v. meting -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="Lichaamslengte^bij geboorte [afmeting] d.m.v. meting"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="89269-5"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- 10 minute Apgar Score -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="10 minute Apgar Score"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="9271-8"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- 1 minute Apgar Score -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="1 minute Apgar Score"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="9272-6"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- 5 minute Apgar Score -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="5 minute Apgar Score"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="9274-2"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- Fronto-occipitale omtrek [afmeting] in hoofd -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="Fronto-occipitale omtrek [afmeting] in hoofd"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="9843-4"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- aantal levende nakomelingen (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="aantal levende nakomelingen (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="143881000146107"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- definitieve uitgerekende datum van partus (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="definitieve uitgerekende datum van partus (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="147781000146105"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- geschatte datum van partus (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="geschatte datum van partus (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="161714006"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- kenmerk van extremiteit (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="kenmerk van extremiteit (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="363799009"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- observatie betreffende neurologie (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="observatie betreffende neurologie (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="363820009"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- observatie betreffende geslachtsorgaan (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="observatie betreffende geslachtsorgaan (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="364204002"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- observatie betreffende hoofd-halsregio (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="observatie betreffende hoofd-halsregio (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="364403006"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- observatie betreffende wervelkolom (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="observatie betreffende wervelkolom (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="364415005"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- aspect van thorax (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="aspect van thorax (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="364434005"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- algemene kenmerken van abdomen (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="algemene kenmerken van abdomen (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="364446009"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- observatie betreffende huid (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="observatie betreffende huid (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="364528001"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- zwangerschapsduur -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="zwangerschapsduur"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="4"/>
         <nts:with-parameter name="code" value="57036006"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- tweelingzwangerschap (bevinding) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="tweelingzwangerschap (bevinding)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="65147003"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- intake van foliumzuur (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="intake van foliumzuur (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="792807003"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
   </test>

   <!-- Observations - Observaties gekoppeld aan prenatale controle -->
   <test id="5b-RetrieveObservations">
      <name value="5b-RetrieveObservations"/>
      <description value="Test Client query operation for Observations"/>
      <nts:include value="medmij/test.phr.successfulsearch" scope="common">
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="params" value="?context:Encounter.episodeofcare=EpisodeOfCare/${episode-id}"/>
      </nts:include>
      <!-- Lichaamsgewicht [massa] -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="Lichaamsgewicht [massa]"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="29463-7"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- Bloeddruk panel waarvan alle leden optioneel in arterieel vaatstelsel -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="Bloeddruk panel waarvan alle leden optioneel in arterieel vaatstelsel"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="85354-9"/>
         <nts:with-parameter name="system" value="http://loinc.org"/>
      </nts:include>
      <!-- datum en tijd van geboorte van placenta (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="datum en tijd van geboorte van placenta (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="136311000146100"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- manier waarop eerste fase van partus is begonnen (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="manier waarop eerste fase van partus is begonnen (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="160611000146102"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- datum van begin van eerste fase van partus (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="datum van begin van eerste fase van partus (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="160621000146107"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- aspect van vruchtwater (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="aspect van vruchtwater (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="168089007"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- bevinding betreffende alcoholgebruik (bevinding) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="bevinding betreffende alcoholgebruik (bevinding)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="228273003"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- bevinding betreffende drugsgebruik (bevinding) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="bevinding betreffende drugsgebruik (bevinding)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="228366006"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- geboorte van placenta (verrichting) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="geboorte van placenta (verrichting)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="236994008"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- aantal bloedvaten in navelstreng (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="aantal bloedvaten in navelstreng (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="249191003"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- presenterend deel van foetus (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="presenterend deel van foetus (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="271692001"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- tijdstip waarop gebroken vliezen zijn geconstateerd (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="tijdstip waarop gebroken vliezen zijn geconstateerd (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="289251005"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- bloedverlies durante partu (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="bloedverlies durante partu (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="364332008"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- soort partus (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="soort partus (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="364336006"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- compleetheid van placenta (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="compleetheid van placenta (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="364343000"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- compleetheid van vruchtvliezen (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="compleetheid van vruchtvliezen (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="364351002"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- bewegingspatroon van foetus (waarneembare entiteit) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="bewegingspatroon van foetus (waarneembare entiteit)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="364618000"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- bevinding betreffende tabakgebruik en blootstelling aan tabaksrook (bevinding) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="bevinding betreffende tabakgebruik en blootstelling aan tabaksrook (bevinding)"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="365980008"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- bevinding betreffende locatie van partus -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="bevinding betreffende locatie van partus"/>
         <nts:with-parameter name="resource" value="Observation"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="366344009"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
   </test>

   <!-- Alle verrichtingen -->
   <test id="6-RetrieveProcedures">
      <name value="6-RetrieveProcedures"/>
      <description value="Test Client query operation for (Obstetric) Procedures"/>
      <nts:include value="medmij/test.phr.successfulsearch" scope="common">
         <nts:with-parameter name="resource" value="Procedure"/>
         <nts:with-parameter name="params" value="?context=EpisodeOfCare/${episode-id}&amp;_include=Procedure:performer&amp;_include=Procedure:based-on"/>
      </nts:include>
      <nts:include value="assert.response.numResources" scope="common" resource="Procedure" count="11"/>
      <nts:include value="assert.response.numResources" scope="common" resource="Organization" count="1"/>
      <!-- verlossing (verrichting) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="verlossing (verrichting)"/>
         <nts:with-parameter name="resource" value="Procedure"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="236973005"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- inflatie van long door intermitterende compressie van reservoirballon -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="inflatie van long door intermitterende compressie van reservoirballon"/>
         <nts:with-parameter name="resource" value="Procedure"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="243140006"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- opname in ziekenhuis (verrichting) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="opname in ziekenhuis (verrichting)"/>
         <nts:with-parameter name="resource" value="Procedure"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="32485007"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- geboorte (bevinding) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="geboorte (bevinding)"/>
         <nts:with-parameter name="resource" value="Procedure"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="3950001"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- bloedonderzoek (verrichting) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="bloedonderzoek (verrichting)"/>
         <nts:with-parameter name="resource" value="Procedure"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="396550006"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- dieetmanagement (verrichting) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="dieetmanagement (verrichting)"/>
         <nts:with-parameter name="resource" value="Procedure"/>
         <nts:with-parameter name="count" value="1"/>
         <nts:with-parameter name="code" value="410175003"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- vitamine K toediening aan neonaat -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="vitamine K toediening aan neonaat"/>
         <nts:with-parameter name="resource" value="Procedure"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="698350008:370131001=133933007"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
      <!-- primaire sectio caesarea (verrichting) -->
      <nts:include value="gbz-assert-returnCountWithCode">
         <nts:with-parameter name="additionalDescription" value="primaire sectio caesarea (verrichting)"/>
         <nts:with-parameter name="resource" value="Procedure"/>
         <nts:with-parameter name="count" value="2"/>
         <nts:with-parameter name="code" value="80771000146107"/>
         <nts:with-parameter name="system" value="http://snomed.info/sct"/>
      </nts:include>
   </test>

   <!-- RelatedPerson -->
   <test id="7-RetrieveRelatedPerson">
      <name value="7-RetrieveRelatedPerson"/>
      <description value="Test Client query operation for RelatedPerson"/>
      <nts:include value="medmij/test.phr.successfulsearch" scope="common">
         <nts:with-parameter name="resource" value="RelatedPerson"/>
      </nts:include>
      <nts:include value="assert.response.numResources" scope="common">
         <nts:with-parameter name="resource" value="RelatedPerson"/>
         <nts:with-parameter name="count" value="1"/>
      </nts:include>
   </test>

   <!-- ReferralRequest -->
   <test id="8-RetrieveReferralRequest">
      <name value="8-RetrieveReferralRequest"/>
      <description value="Test Client query operation for ReferralRequest"/>
      <nts:include value="medmij/test.phr.successfulsearch" scope="common">
         <nts:with-parameter name="resource" value="ReferralRequest"/>
         <nts:with-parameter name="params" value="?context=EpisodeOfCare/${episode-id}"/>
      </nts:include>
      <nts:include value="assert.response.numResources" scope="common">
         <nts:with-parameter name="resource" value="ReferralRequest"/>
         <nts:with-parameter name="count" value="1"/>
      </nts:include>
   </test>

</TestScript>
